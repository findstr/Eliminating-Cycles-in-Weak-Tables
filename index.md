# 使用弱表避免循环引用（Eliminating Cycles in Weak Tables）

------

- 作者：Alexandra Barros, Roberto Ierusalimschy
- 译者：[重归混沌](http://blog.gotocoding.com)

## 摘要：

*弱引用* 为与垃圾回收器交互提供了一种优雅的机制。*弱引用* 的大多数典型应用都是通过*弱表*来实现的（例如:Java中的WeakHasMap）。 然而大多数*弱表*都有一个很苛刻的限制：只要*弱表*中key和valu相互循环引用，那么即使已经没有外部数据对他们进行引用，这些数据也不会被垃圾因收器回收。这将会为某些类型的应用程序使用弱表带来困难。

在本文中，我们呈现了在lua编程语言中，是如何克服这个困难的。我们的方法包含了一个对表的ephemerons机制的变种。为了提供这种机制，我们修改了lua虚拟机的垃圾回收器。带着这个修改后的垃圾回收器，我们可以来这个解决弱表中的循环引用是实现是否高效和可用。

#### 关键字:垃圾回惧，弱表，弱引用

#### 分类: D.3.3



